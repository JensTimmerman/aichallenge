{% extends "layout.html" -%}
{% set active_page = "None" %}

{% block content -%}
  <div class="content">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3>{{ bot.name }}</h3>
      </div>
      <div class="panel-body">
       <p>
         Owner: <a href="{{ url_for('user_page', user=bot.user.nickname) }}">{{ bot.user.nickname }}</a><br>
         Compile command: {{ bot.compile_cmd }}<br>
         Run command: {{ bot.run_cmd }}<br>
       </p>
      </div>
    </div>

    <table class="table table-striped table-hover">
    <caption>Matches</caption>
      <tr>
        <th>Time</th>
        <th>Against</th>
        <th>Outcome</th>
        <th></th>
      </tr>
      {% for match in bot.matches %}
        <tr>
          <td>{{ match.end_time.strftime('%d/%m %H:%M') }}</td>
          <td>
            {% for participant in match.bots %}
              <a href="{{ url_for('bot_page', user=participant.user.nickname, botname=participant.name) }}">
                {{ participant.name }}
              </a>
            {% endfor %}
          </td>
          <td>
            {% set winner = match.winner %}
            {% if winner %}
              <a href="{{ url_for('bot_page', user=winner.user.nickname, botname=winner.name) }}">{{ winner.name }}</a> won
            {% else %}
              Draw
            {% endif %}
          </td>
          <td>
            <a href="{{ url_for('match_page', matchid=match.id) }}">View</a>
          </td>
        </tr>
      {% endfor %}
    </table>
  </div>
{%- endblock %}
